Index: concordance-0.21/libconcord/INSTALL.linux
===================================================================
--- concordance-0.21/libconcord/INSTALL.linux
+++ concordance-0.21/libconcord/INSTALL.linux	2010-06-23 08:06:31.866416256 +0300
@@ -51,6 +51,16 @@
   make consolekit
   sudo make install_consolekit
 
+If your system is using udev-acl with udev 153 or older, you can use:
+
+  make udev_acl1
+  sudo make install_udev_acl1
+
+If your system is using udev-acl with udev 154 or newer, you can use:
+
+  make udev_acl2
+  sudo make install_udev_acl2
+
 If you're not sure which method your system uses, the udev one will work on
 all systems. 
 
Index: concordance-0.21/libconcord/Makefile.am
===================================================================
--- concordance-0.21/libconcord/Makefile.am
+++ concordance-0.21/libconcord/Makefile.am	2010-06-23 08:37:22.316478786 +0300
@@ -37,6 +37,17 @@
 	$(install_sh_DATA) libconcord.perms \
 		$(DESTDIR)$(datarootdir)/hal/fdi/policy/10osvendor/99-libconcord.perms
 
+udev_acl1:
+	./gen_udev_support -a
+
+install_udev_acl1 install_udev_acl2:
+	$(MKDIR_P) $(DESTDIR)/lib/udev/rules.d
+	$(install_sh_DATA) libconcord.rules \
+		$(DESTDIR)/lib/udev/rules.d/60-libconcord.rules
+
+udev_acl2:
+	./gen_udev_support -b
+
 # MIME stuff
 
 newmimedir = $(datadir)/mime/packages
Index: concordance-0.21/libconcord/gen_udev_support
===================================================================
--- concordance-0.21/libconcord/gen_udev_support
+++ concordance-0.21/libconcord/gen_udev_support	2010-06-23 08:09:25.744416496 +0300
@@ -16,6 +16,8 @@
 
 UDEV_POLICY_TEMPLATE='ATTR{idVendor}=="%s", ATTR{idProduct}=="%s", SYMLINK+="harmony-%%k"'
 UDEV_NO_POLICY_TEMPLATE='SYSFS{idVendor}=="%s", SYSFS{idProduct}=="%s", MODE="0660", GROUP="dialout"'
+UDEV_ACL1_TEMPLATE='ATTR{idVendor}=="%s", ATTR{idProduct}=="%s", ENV{ACL_MANAGE}="1"'
+UDEV_ACL2_TEMPLATE='ATTR{idVendor}=="%s", ATTR{idProduct}=="%s", TAG+="udev-acl"'
 
 HAL_PRE_TEMPLATE='    <match key="usb_device.vendor_id" int="0x%s">'
 HAL_RULE_TEMPLATE='      <match key="usb_device.product_id" int="0x%s">
@@ -82,6 +84,10 @@
     type="$2"
     if [ "$type" == 'policykit' -o "$type" == 'consolekit' ]; then
         template="$UDEV_POLICY_TEMPLATE"
+    elif [ "$type" == 'udev_acl1' ]; then
+        template="$UDEV_ACL1_TEMPLATE"
+    elif [ "$type" == 'udev_acl2' ]; then
+        template="$UDEV_ACL2_TEMPLATE"
     else
         template="$UDEV_NO_POLICY_TEMPLATE"
     fi
@@ -189,14 +195,14 @@
 #
 
 usage() {
-    echo "Usage: $0 <-u|-p|-c>"
+    echo "Usage: $0 <-u|-p|-c|-a|-b>"
 }
 
 #
 # MAIN
 #
 
-while getopts upc opt; do
+while getopts upcab opt; do
     case $opt in
         u)
             MODE='udev_only'
@@ -207,6 +213,12 @@
         c)
             MODE='consolekit'
             ;;
+        a)
+            MODE='udev_acl1'
+            ;;
+        b)
+            MODE='udev_acl2'
+            ;;
         *)
             usage
             exit 1
